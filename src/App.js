import './App.css';
import {Cartesian3, Cartographic, CesiumTerrainProvider, Rectangle, Transforms} from "cesium";
import {Viewer, Entity, Polyline, PolylineCollection, CameraFlyTo} from "resium";
import * as Cesium from "cesium";
import {useEffect, useState} from "react";


const rawCoords = [[-122.26348000000002,37.82822],[-122.26336,37.828630000000004],[-122.26331,37.828720000000004],[-122.26328000000001,37.82876],[-122.26322,37.828790000000005],[-122.26309,37.8288],[-122.26257000000001,37.82874],[-122.26168000000001,37.82862],[-122.26106000000001,37.82856],[-122.26089,37.82851],[-122.25843,37.82813],[-122.25815000000001,37.828070000000004],[-122.25787000000001,37.827980000000004],[-122.25741000000001,37.82786],[-122.25715000000001,37.82777],[-122.25682,37.82761],[-122.25673,37.82759],[-122.25665000000001,37.827600000000004],[-122.25656000000001,37.827630000000006],[-122.25650000000002,37.827670000000005],[-122.25538000000002,37.829510000000006],[-122.25420000000001,37.83138],[-122.25396,37.831790000000005],[-122.25365000000001,37.83225],[-122.25271000000001,37.83379],[-122.25245000000001,37.834160000000004],[-122.2523,37.834250000000004],[-122.25218000000001,37.834250000000004],[-122.25189,37.83413],[-122.25133000000001,37.833960000000005],[-122.25069,37.833690000000004],[-122.25054000000002,37.833670000000005],[-122.25041000000002,37.83373],[-122.25034000000001,37.833800000000004],[-122.24988,37.834340000000005],[-122.24985000000001,37.834430000000005],[-122.24986000000001,37.834480000000006],[-122.24997,37.8346],[-122.251,37.83522],[-122.25146000000001,37.83552],[-122.25155000000001,37.83561],[-122.25156000000001,37.835660000000004],[-122.25154,37.835710000000006],[-122.25113,37.836450000000006],[-122.25079000000001,37.83693],[-122.25040000000001,37.8376],[-122.24969000000002,37.838730000000005],[-122.24865000000001,37.84042],[-122.24734000000001,37.84252],[-122.24604000000001,37.844590000000004],[-122.24573000000001,37.845060000000004],[-122.24524000000001,37.84588],[-122.24466000000001,37.84673],[-122.24428,37.84718],[-122.24371000000001,37.847770000000004],[-122.24342000000001,37.84798],[-122.24318000000001,37.84814],[-122.24264000000001,37.848380000000006],[-122.24100000000001,37.84901],[-122.24004000000001,37.849410000000006],[-122.23966000000001,37.849520000000005],[-122.23932,37.849590000000006],[-122.23915000000001,37.849610000000006],[-122.23864,37.849590000000006],[-122.23839000000001,37.84957],[-122.23806,37.849500000000006],[-122.23787000000002,37.84944],[-122.23744,37.84926],[-122.23712,37.849090000000004],[-122.23630000000001,37.848580000000005],[-122.23593000000001,37.84841],[-122.23568000000002,37.84832],[-122.23532000000002,37.848220000000005],[-122.23491000000001,37.848150000000004],[-122.23461,37.848130000000005],[-122.23420000000002,37.84816],[-122.23156000000002,37.84861],[-122.23127000000001,37.84863],[-122.23056000000001,37.84864],[-122.23017000000002,37.848620000000004],[-122.2296,37.84854],[-122.22919000000002,37.848470000000006],[-122.22865000000002,37.848330000000004],[-122.2288,37.848180000000006],[-122.22889,37.848870000000005],[-122.22895000000001,37.8494],[-122.22893,37.85016],[-122.22883000000002,37.85058],[-122.22858000000001,37.85127000000001],[-122.22843,37.852120000000006],[-122.22828000000001,37.852470000000004],[-122.22814000000001,37.85276],[-122.22786,37.852970000000006],[-122.22769000000001,37.85336],[-122.22747000000001,37.853570000000005],[-122.22709,37.853770000000004],[-122.22688000000001,37.85405],[-122.22671000000001,37.85418000000001],[-122.22656,37.85427],[-122.22644000000001,37.8543],[-122.22637000000002,37.854260000000004],[-122.2262,37.85419],[-122.22607,37.853550000000006],[-122.22611,37.85314],[-122.22652000000001,37.853060000000006],[-122.22674,37.85273],[-122.22687,37.85249],[-122.22699000000001,37.852320000000006],[-122.22704000000002,37.85199],[-122.22710000000001,37.851780000000005],[-122.22711000000001,37.85126],[-122.22704000000002,37.85081],[-122.227,37.850370000000005],[-122.22696,37.85023],[-122.22691,37.85018],[-122.22686000000002,37.850150000000006],[-122.22674,37.85016],[-122.22671000000001,37.85024000000001],[-122.22679000000001,37.85033],[-122.22680000000001,37.85099],[-122.22678,37.85141],[-122.22672000000001,37.85154],[-122.22665,37.85168],[-122.22657000000001,37.851780000000005],[-122.22638,37.851850000000006],[-122.22632000000002,37.851940000000006],[-122.22626000000001,37.852000000000004],[-122.22618000000001,37.85213],[-122.22607,37.85239],[-122.22598,37.852520000000005],[-122.22588,37.85257],[-122.22579,37.852590000000006],[-122.2257,37.852590000000006],[-122.22558000000001,37.85258],[-122.22534000000002,37.852500000000006],[-122.22526,37.85224],[-122.22522000000001,37.85219],[-122.22518000000001,37.8522],[-122.22512,37.85222],[-122.22503,37.8523],[-122.22492000000001,37.85278],[-122.22485,37.85309],[-122.22481,37.85318],[-122.22466000000001,37.85322],[-122.22442000000001,37.85327],[-122.22424000000001,37.853260000000006],[-122.22411000000001,37.85322],[-122.22391,37.85314],[-122.22365,37.85295],[-122.22357000000001,37.85276],[-122.22348000000001,37.85273],[-122.22341000000002,37.852740000000004],[-122.22334000000001,37.85282],[-122.22324,37.85315000000001],[-122.22308000000001,37.853410000000004],[-122.22298,37.85358],[-122.22288,37.85361],[-122.22279,37.85362000000001],[-122.22222000000001,37.853590000000004],[-122.22205000000001,37.853350000000006],[-122.22197000000001,37.85325],[-122.22191000000001,37.85325],[-122.22191000000001,37.85331],[-122.22193000000001,37.85342],[-122.22208,37.853530000000006],[-122.22170000000001,37.85338],[-122.22157000000001,37.853370000000005],[-122.22145,37.853370000000005],[-122.22121000000001,37.853440000000006],[-122.22092,37.85349],[-122.22080000000001,37.853530000000006],[-122.22064,37.85362000000001],[-122.22054000000001,37.85374],[-122.22050000000002,37.853840000000005],[-122.22049000000001,37.854040000000005],[-122.22051,37.854420000000005],[-122.22053000000001,37.854510000000005],[-122.22078,37.85483],[-122.22094000000001,37.85515],[-122.22112000000001,37.85539],[-122.22113000000002,37.85548],[-122.22108000000001,37.855720000000005],[-122.22109,37.85582],[-122.22114,37.855900000000005],[-122.22138000000001,37.85611],[-122.22142000000001,37.856190000000005],[-122.22142000000001,37.85629],[-122.22137000000001,37.856370000000005],[-122.221,37.856680000000004],[-122.22093000000001,37.856770000000004],[-122.22089000000001,37.856860000000005],[-122.22087,37.856950000000005],[-122.22090000000001,37.857260000000004],[-122.22085000000001,37.85734],[-122.22074,37.85739],[-122.22044000000001,37.85745],[-122.22033,37.8575],[-122.22026000000001,37.857580000000006],[-122.22002,37.85819],[-122.21992000000002,37.85857],[-122.21986000000001,37.858650000000004],[-122.21977000000001,37.858700000000006],[-122.21960000000001,37.858720000000005],[-122.21946000000001,37.858650000000004],[-122.21910000000001,37.858180000000004],[-122.21898000000002,37.858070000000005],[-122.21884000000001,37.85799],[-122.21865000000001,37.857940000000006],[-122.21856000000001,37.857940000000006],[-122.21828000000001,37.858000000000004],[-122.21820000000001,37.857960000000006],[-122.21818,37.857870000000005],[-122.21822000000002,37.85766],[-122.21845,37.85737],[-122.21848000000001,37.857260000000004],[-122.21845,37.85719],[-122.21839000000001,37.85712],[-122.21806000000001,37.85689],[-122.21801,37.856840000000005],[-122.21798000000001,37.85678],[-122.21799000000001,37.85665],[-122.21813000000002,37.856390000000005],[-122.21816000000001,37.856280000000005],[-122.21817000000001,37.85616],[-122.21814,37.85609],[-122.21805,37.856010000000005],[-122.21785000000001,37.85589],[-122.21747,37.855790000000006],[-122.21729,37.85578],[-122.21694000000001,37.855850000000004],[-122.21682000000001,37.855850000000004],[-122.21674000000002,37.855810000000005],[-122.21667000000001,37.855720000000005],[-122.21664000000001,37.855520000000006],[-122.21668000000001,37.8553],[-122.21669000000001,37.85508],[-122.21665000000002,37.85501],[-122.21659000000001,37.854960000000005],[-122.21652000000002,37.85493],[-122.21636000000001,37.85493],[-122.21567,37.855090000000004],[-122.2155,37.855090000000004],[-122.21544000000002,37.85504],[-122.21539000000001,37.854940000000006],[-122.21547000000001,37.854710000000004],[-122.21547000000001,37.854600000000005],[-122.21545,37.854560000000006],[-122.21538000000001,37.854510000000005],[-122.21526000000001,37.854470000000006],[-122.21513000000002,37.854470000000006],[-122.215,37.8545],[-122.21488000000001,37.85454],[-122.21471000000001,37.85463],[-122.21458000000001,37.854670000000006],[-122.21421000000001,37.85465000000001],[-122.21396000000001,37.8547],[-122.21371,37.85474],[-122.21323000000001,37.854670000000006],[-122.21313,37.854620000000004],[-122.21307000000002,37.85457],[-122.21295,37.854260000000004],[-122.21292000000001,37.854200000000006],[-122.21282000000001,37.85409000000001],[-122.21273000000001,37.854020000000006],[-122.21247000000001,37.853880000000004],[-122.21215000000001,37.85358],[-122.21172000000001,37.853260000000006],[-122.21161000000001,37.853100000000005],[-122.21157000000001,37.85293],[-122.21172000000001,37.85278],[-122.21182,37.8528],[-122.21197000000001,37.85278],[-122.21208000000001,37.852630000000005],[-122.21233000000001,37.8524],[-122.21254,37.85229],[-122.21268,37.852230000000006],[-122.21318000000001,37.852070000000005],[-122.21357,37.8519],[-122.21364000000001,37.851850000000006],[-122.21376000000001,37.85172],[-122.21379,37.85165000000001],[-122.21379,37.851560000000006],[-122.21375,37.851490000000005],[-122.21365000000002,37.85145],[-122.21280000000002,37.851510000000005],[-122.21256000000001,37.851490000000005],[-122.21196,37.8513],[-122.21175000000001,37.85118000000001],[-122.2116,37.85108],[-122.21147,37.85096],[-122.21144000000001,37.850840000000005],[-122.21159000000002,37.85069],[-122.21176000000001,37.850680000000004],[-122.21197000000001,37.85061],[-122.21218,37.850570000000005],[-122.21264000000001,37.850590000000004],[-122.21274000000001,37.85081],[-122.21277,37.850910000000006],[-122.21276,37.851000000000006],[-122.21272,37.851150000000004],[-122.21253000000002,37.85128],[-122.21249000000002,37.85163],[-122.21239000000001,37.85175],[-122.21238000000001,37.85228],[-122.21240000000002,37.8524],[-122.21242000000001,37.852520000000005],[-122.21248000000001,37.85257],[-122.21258000000002,37.852650000000004],[-122.21275000000001,37.85271],[-122.21284000000001,37.85277],[-122.21293000000001,37.852850000000004],[-122.21304,37.85295],[-122.21325000000002,37.85315000000001],[-122.21344,37.85362000000001],[-122.21348,37.853860000000005],[-122.21345000000001,37.854000000000006],[-122.21342000000001,37.85416],[-122.21335,37.854200000000006],[-122.21324000000001,37.854260000000004],[-122.21285,37.8543],[-122.21272,37.854330000000004],[-122.21265000000001,37.85437],[-122.21258000000002,37.854420000000005],[-122.21252000000001,37.85455],[-122.21252000000001,37.85481],[-122.21258000000002,37.854980000000005],[-122.21259,37.855290000000004],[-122.21262000000002,37.85577],[-122.21267000000002,37.85593],[-122.21273000000001,37.85602],[-122.21302000000001,37.85609],[-122.21309000000001,37.856280000000005],[-122.21314000000001,37.85634],[-122.21319000000001,37.8564],[-122.21318000000001,37.85652],[-122.21307000000002,37.85676],[-122.21306000000001,37.85716],[-122.21310000000001,37.85728],[-122.21315000000001,37.857670000000006],[-122.21315000000001,37.857980000000005],[-122.21313,37.85826],[-122.21300000000001,37.8584],[-122.21299,37.85884],[-122.21304,37.85902],[-122.21312,37.859120000000004],[-122.21359000000001,37.859190000000005],[-122.21401000000002,37.85943],[-122.21447,37.85974],[-122.21464000000002,37.85999],[-122.21486000000002,37.86016],[-122.21531000000002,37.860510000000005],[-122.21544000000002,37.8611],[-122.21566000000001,37.86119],[-122.21579000000001,37.86126],[-122.21589000000002,37.861360000000005],[-122.21607000000002,37.86150000000001],[-122.21611000000001,37.86186],[-122.21611000000001,37.86206],[-122.21606000000001,37.862190000000005],[-122.21598000000002,37.86229],[-122.21565000000001,37.86233],[-122.21544000000002,37.862280000000005],[-122.21516000000001,37.86215],[-122.215,37.86187],[-122.21488000000001,37.86168],[-122.21478,37.861580000000004],[-122.21437000000002,37.861540000000005],[-122.21426000000001,37.86144],[-122.21417000000001,37.86139],[-122.21399000000001,37.86133],[-122.21376000000001,37.861140000000006],[-122.21362,37.86081],[-122.21352000000002,37.860690000000005],[-122.21341000000001,37.86065],[-122.21307000000002,37.86063],[-122.21296000000001,37.86066],[-122.21284000000001,37.86065],[-122.21273000000001,37.86061],[-122.21262000000002,37.86054],[-122.21245,37.86045],[-122.21232,37.860170000000004],[-122.21221000000001,37.85985],[-122.21203000000001,37.85927],[-122.21198000000001,37.858760000000004],[-122.21198000000001,37.85844],[-122.21207000000001,37.85821],[-122.21209,37.857730000000004],[-122.21217000000001,37.85746],[-122.21214,37.856010000000005],[-122.21199000000001,37.855630000000005],[-122.21196,37.85517],[-122.21197000000001,37.85492],[-122.21208000000001,37.854670000000006],[-122.21206000000001,37.85409000000001],[-122.21204000000002,37.853860000000005],[-122.21195000000002,37.853750000000005],[-122.21173000000002,37.853570000000005],[-122.21153000000001,37.85322],[-122.21142,37.85284],[-122.21136000000001,37.85268000000001],[-122.21123000000001,37.85262],[-122.21117000000001,37.85255],[-122.21095000000001,37.852540000000005],[-122.21081000000001,37.85255],[-122.21055000000001,37.85249],[-122.21038000000001,37.8523],[-122.21023000000001,37.852120000000006],[-122.20971000000002,37.85202],[-122.20957000000001,37.85179],[-122.2095,37.85175],[-122.20922000000002,37.851760000000006],[-122.20907000000001,37.8519],[-122.20892,37.851940000000006],[-122.20869,37.851940000000006],[-122.20853000000001,37.851910000000004],[-122.20838,37.851870000000005],[-122.20824,37.851780000000005],[-122.20797,37.85166],[-122.20783000000002,37.85139],[-122.20776000000001,37.85128],[-122.20760000000001,37.851240000000004],[-122.20736000000001,37.85121],[-122.20720000000001,37.851240000000004],[-122.20695,37.85123],[-122.20680000000002,37.85114],[-122.20668,37.85105],[-122.20657000000001,37.850910000000006],[-122.20629000000001,37.850770000000004],[-122.20591,37.85033],[-122.20587,37.849940000000004],[-122.20579000000001,37.849880000000006],[-122.20574,37.84966],[-122.20567000000001,37.849270000000004],[-122.20559000000002,37.84908],[-122.20529,37.848980000000005],[-122.20512000000001,37.84873],[-122.20454000000001,37.84854],[-122.20439,37.84765],[-122.20422,37.847370000000005],[-122.20405000000001,37.84704],[-122.2039,37.8468],[-122.20382000000001,37.84669],[-122.20330000000001,37.84666],[-122.20308000000001,37.846540000000005],[-122.20289000000001,37.846450000000004],[-122.20239000000001,37.84629],[-122.20221000000001,37.84577],[-122.20195000000001,37.845670000000005],[-122.20178000000001,37.845600000000005],[-122.20168000000001,37.8455],[-122.20145000000001,37.84541],[-122.20069000000001,37.8451],[-122.20059,37.844210000000004],[-122.20047000000001,37.84405],[-122.20038000000001,37.8438],[-122.20031000000002,37.84366],[-122.20001,37.843590000000006],[-122.19944000000001,37.843360000000004],[-122.19931000000001,37.8427],[-122.19909000000001,37.842510000000004],[-122.19904000000001,37.84212],[-122.19902,37.842000000000006],[-122.19904000000001,37.841860000000004],[-122.19912000000001,37.84172],[-122.19938,37.84161],[-122.19948000000001,37.841440000000006],[-122.19953000000001,37.84134],[-122.19952,37.8412],[-122.19947,37.841120000000004],[-122.19938,37.84098],[-122.19932000000001,37.84089],[-122.1992,37.840860000000006],[-122.19901000000002,37.84085],[-122.19868000000001,37.84087],[-122.19857,37.840970000000006],[-122.19852000000002,37.840970000000006],[-122.19839,37.84096],[-122.19833000000001,37.84085],[-122.19824000000001,37.84075],[-122.19825000000002,37.84046],[-122.1984,37.84031],[-122.19801000000001,37.84019],[-122.19788000000001,37.840120000000006],[-122.19779000000001,37.84002],[-122.19777,37.83995],[-122.19777,37.83988],[-122.19786,37.839600000000004],[-122.19789000000002,37.839290000000005],[-122.19804,37.83914],[-122.19810000000001,37.839180000000006],[-122.19814000000001,37.83921],[-122.19817,37.839270000000006],[-122.19818000000001,37.83934],[-122.19816000000002,37.839420000000004],[-122.19814000000001,37.83959],[-122.19806000000001,37.839670000000005],[-122.19801000000001,37.839800000000004],[-122.19778000000001,37.83984],[-122.19771000000001,37.83997],[-122.19769000000001,37.84008],[-122.19770000000001,37.84015],[-122.19776000000002,37.840300000000006],[-122.19802000000001,37.840430000000005],[-122.19831,37.840860000000006],[-122.19858,37.841240000000006],[-122.19896000000001,37.841550000000005],[-122.19905000000001,37.8419],[-122.19939000000001,37.842020000000005],[-122.19961,37.842560000000006],[-122.19995000000002,37.84282],[-122.20025000000001,37.84319],[-122.20047000000001,37.843590000000006],[-122.20059,37.84382],[-122.20098000000002,37.84391],[-122.20110000000001,37.84409],[-122.20142000000001,37.84418],[-122.20175,37.84451],[-122.20200000000001,37.84478],[-122.20233,37.84487],[-122.20261,37.84492],[-122.20275000000001,37.84499],[-122.20285000000001,37.84507],[-122.20297000000001,37.845180000000006],[-122.20322000000002,37.84534],[-122.20369000000001,37.845870000000005],[-122.2039,37.846590000000006],[-122.20425000000002,37.84684],[-122.20433000000001,37.847170000000006],[-122.20441000000001,37.847280000000005],[-122.20446000000001,37.8474],[-122.20454000000001,37.84754],[-122.20460000000001,37.848000000000006],[-122.20476000000001,37.84814],[-122.20503000000001,37.84837],[-122.20531000000001,37.848690000000005],[-122.20546000000002,37.84913],[-122.20529,37.848980000000005],[-122.20517000000001,37.84881],[-122.20512000000001,37.84864],[-122.20511,37.848400000000005],[-122.20513000000001,37.84817],[-122.20510000000002,37.84801],[-122.20498,37.847840000000005],[-122.20471,37.84761],[-122.20486000000001,37.847460000000005],[-122.20498,37.8476],[-122.20513000000001,37.84769],[-122.20507,37.84754],[-122.20504000000001,37.847370000000005],[-122.20504000000001,37.847190000000005],[-122.20505000000001,37.84709],[-122.20519000000002,37.846740000000004],[-122.2052,37.846650000000004],[-122.20518000000001,37.84646],[-122.20515,37.846360000000004],[-122.20489,37.84591],[-122.20504000000001,37.845760000000006],[-122.20531000000001,37.845890000000004],[-122.20538,37.84619],[-122.20553000000001,37.846230000000006],[-122.20546000000002,37.84608],[-122.20545000000001,37.8457],[-122.20540000000001,37.84559],[-122.20532000000001,37.845510000000004],[-122.20508000000001,37.845380000000006],[-122.20470000000002,37.84519],[-122.20438000000001,37.84496],[-122.20425000000002,37.844910000000006],[-122.20417,37.84489000000001],[-122.20398000000002,37.844910000000006],[-122.20345,37.845000000000006],[-122.20322000000002,37.845020000000005],[-122.20297000000001,37.84498],[-122.20312000000001,37.84483],[-122.20315000000001,37.845270000000006],[-122.20314,37.845510000000004],[-122.20311000000001,37.846920000000004],[-122.20299000000001,37.84743],[-122.203,37.848020000000005],[-122.20305,37.848150000000004],[-122.20316000000001,37.848420000000004],[-122.20323,37.848690000000005],[-122.20335000000001,37.848910000000004],[-122.20346,37.84957],[-122.20365000000001,37.849810000000005],[-122.20380000000002,37.85014],[-122.20368,37.849990000000005],[-122.20365000000001,37.84993],[-122.20361000000001,37.84976],[-122.20365000000001,37.84944],[-122.20365000000001,37.84935],[-122.20360000000001,37.849230000000006],[-122.20375000000001,37.84908],[-122.20407000000002,37.84919],[-122.20415000000001,37.849610000000006],[-122.20432000000001,37.84969],[-122.20468000000001,37.849790000000006],[-122.20490000000001,37.84986],[-122.20505000000001,37.849970000000006],[-122.20493,37.84982],[-122.20451000000001,37.84944],[-122.20441000000001,37.84931],[-122.2043,37.849140000000006],[-122.20427000000001,37.84906],[-122.20426,37.848980000000005],[-122.20428000000001,37.848910000000004],[-122.20432000000001,37.84886],[-122.20439,37.84882],[-122.20455000000001,37.84882],[-122.20478000000001,37.848890000000004],[-122.20500000000001,37.849000000000004],[-122.20518000000001,37.84915],[-122.20528000000002,37.8494],[-122.20534,37.84951],[-122.20543,37.849610000000006],[-122.20644000000001,37.85031],[-122.20657000000001,37.85049],[-122.20675000000001,37.85083],[-122.20706000000001,37.85125],[-122.20715000000001,37.851400000000005],[-122.2073,37.85173],[-122.20722,37.851580000000006],[-122.20716000000002,37.85152],[-122.20713,37.851440000000004],[-122.20713,37.85134],[-122.20716000000002,37.85123],[-122.20724000000001,37.85112],[-122.2073,37.8509],[-122.2073,37.850660000000005],[-122.20722,37.850410000000004],[-122.20723000000001,37.84973],[-122.20733000000001,37.849590000000006],[-122.20734000000002,37.8491],[-122.20732000000001,37.848980000000005],[-122.20716000000002,37.84886],[-122.20686,37.848620000000004],[-122.20674000000001,37.84839],[-122.20672,37.84805],[-122.20664000000001,37.847770000000004],[-122.20666000000001,37.84738],[-122.20675000000001,37.84698],[-122.20682000000001,37.84675],[-122.2069,37.84667],[-122.2074,37.84662],[-122.20748,37.8466],[-122.20755000000001,37.84658],[-122.20759000000001,37.846540000000005],[-122.20760000000001,37.84648],[-122.20756000000002,37.846320000000006],[-122.20736000000001,37.846250000000005],[-122.20715000000001,37.845960000000005],[-122.20708,37.845490000000005],[-122.20694,37.845400000000005],[-122.20663,37.845270000000006],[-122.20655000000001,37.84514],[-122.20649000000002,37.84508],[-122.20646,37.84499],[-122.20646,37.84488],[-122.20653000000001,37.84465],[-122.20657000000001,37.844280000000005],[-122.20682000000001,37.844150000000006],[-122.20685000000002,37.843630000000005],[-122.20683000000001,37.84353],[-122.20673000000001,37.843340000000005],[-122.20688000000001,37.84319],[-122.20697000000001,37.84335],[-122.20706000000001,37.843610000000005],[-122.20707000000002,37.843700000000005],[-122.20692000000001,37.844170000000005],[-122.20692000000001,37.84427],[-122.20695,37.84436],[-122.20707000000002,37.844550000000005],[-122.20725000000002,37.8447],[-122.20735,37.844770000000004],[-122.20771,37.844910000000006],[-122.20798,37.84497],[-122.20840000000001,37.845000000000006],[-122.20920000000001,37.84496],[-122.20928,37.84497],[-122.20935000000001,37.845020000000005],[-122.20938000000001,37.845150000000004],[-122.20934000000001,37.84521],[-122.20928,37.84526],[-122.20898000000001,37.84545],[-122.20869,37.845580000000005],[-122.20811,37.84577],[-122.20775,37.84591],[-122.20757,37.846050000000005],[-122.20744,37.84624],[-122.20742000000001,37.84635],[-122.20742000000001,37.84646],[-122.20744,37.84658],[-122.20749,37.84669],[-122.20757,37.8468],[-122.20766,37.84689],[-122.20799000000001,37.84714],[-122.20841000000001,37.84751],[-122.20853000000001,37.84758],[-122.20869,37.84772],[-122.20883,37.847910000000006],[-122.20889000000001,37.848090000000006],[-122.20895000000002,37.848180000000006],[-122.20903000000001,37.848240000000004],[-122.20933000000001,37.848310000000005],[-122.20959,37.848310000000005],[-122.20977,37.848290000000006],[-122.21013,37.848200000000006],[-122.21049000000001,37.84821],[-122.21061000000002,37.848200000000006],[-122.21095000000001,37.84808],[-122.21119000000002,37.84805],[-122.21136000000001,37.84808],[-122.21141000000001,37.84814],[-122.21138,37.848240000000004],[-122.21128000000002,37.84843],[-122.21127000000001,37.8485],[-122.21130000000001,37.848560000000006],[-122.21134,37.848620000000004],[-122.21149000000001,37.848690000000005],[-122.21165,37.84854],[-122.21163000000001,37.847710000000006],[-122.21140000000001,37.847500000000004],[-122.21100000000001,37.84743],[-122.21084,37.84752],[-122.21077000000001,37.84751],[-122.21069000000001,37.84747],[-122.21076000000001,37.84733000000001],[-122.21073000000001,37.846810000000005],[-122.21064000000001,37.84658],[-122.21054000000001,37.84624],[-122.21048,37.846050000000005],[-122.21039,37.845980000000004],[-122.21031,37.845960000000005],[-122.20998000000002,37.84597],[-122.20989000000002,37.84615],[-122.20980000000002,37.846160000000005],[-122.20971000000002,37.84615],[-122.20953000000002,37.8461],[-122.20945,37.84582],[-122.20938000000001,37.845740000000006],[-122.20930000000001,37.84568],[-122.20922000000002,37.84566],[-122.20902000000001,37.84568],[-122.20887,37.84586],[-122.20873000000002,37.845940000000006],[-122.20866000000001,37.84597],[-122.2086,37.84595],[-122.20856,37.84591],[-122.20856,37.84584],[-122.20861000000001,37.845740000000006],[-122.2086,37.84546],[-122.20857000000001,37.84536000000001],[-122.20853000000001,37.84526],[-122.20834,37.845180000000006],[-122.20804000000001,37.84497],[-122.20792000000002,37.84476],[-122.20788,37.844640000000005],[-122.20791000000001,37.84456],[-122.20797,37.84429],[-122.20805000000001,37.84422],[-122.20814000000001,37.84418],[-122.20844000000001,37.84414],[-122.20895000000002,37.84407],[-122.20915000000001,37.84387],[-122.20921000000001,37.84378],[-122.20926000000001,37.843700000000005],[-122.20930000000001,37.843610000000005],[-122.20933000000001,37.84328],[-122.20939000000001,37.84319],[-122.20945,37.84313],[-122.20968,37.8431],[-122.20985,37.84315],[-122.21001000000001,37.84313],[-122.21026,37.84302],[-122.21033000000001,37.84268],[-122.21041000000001,37.842620000000004],[-122.21049000000001,37.84259],[-122.21056000000002,37.842600000000004],[-122.21076000000001,37.842650000000006],[-122.21085000000001,37.84286],[-122.21094000000001,37.8429],[-122.21121000000001,37.84292000000001],[-122.21129,37.842890000000004],[-122.21146000000002,37.84292000000001],[-122.21174,37.843030000000006],[-122.21209,37.84317],[-122.21219,37.843450000000004],[-122.21230000000001,37.843500000000006],[-122.21240000000002,37.843540000000004],[-122.21283000000001,37.843560000000004],[-122.21293000000001,37.84357],[-122.21302000000001,37.84355],[-122.21309000000001,37.84349],[-122.21315000000001,37.8434],[-122.21329000000001,37.843300000000006],[-122.21329000000001,37.842690000000005],[-122.21326,37.84257],[-122.21310000000001,37.84244],[-122.21309000000001,37.842000000000006],[-122.21309000000001,37.8419],[-122.21312,37.841800000000006],[-122.21317,37.84172],[-122.21323000000001,37.841660000000005],[-122.21344,37.841640000000005],[-122.21400000000001,37.841750000000005],[-122.21421000000001,37.84198000000001],[-122.21431000000001,37.84203],[-122.21441000000002,37.842000000000006],[-122.21449000000001,37.84194],[-122.21455000000002,37.841860000000004],[-122.21463000000001,37.841770000000004],[-122.21467000000001,37.84127],[-122.21473,37.841170000000005],[-122.21480000000001,37.841100000000004],[-122.21487,37.841080000000005],[-122.21533000000001,37.841100000000004],[-122.21552000000001,37.84149],[-122.21572,37.8416],[-122.21592000000001,37.841640000000005],[-122.21601000000001,37.841640000000005],[-122.21610000000001,37.84163],[-122.21616000000002,37.841590000000004],[-122.21621,37.84151000000001],[-122.21625000000002,37.84142000000001],[-122.2163,37.84131],[-122.21633000000001,37.84082],[-122.21638000000002,37.84071],[-122.21644,37.840630000000004],[-122.21650000000001,37.84057],[-122.21657,37.84056],[-122.21674000000002,37.8406],[-122.21690000000001,37.840830000000004],[-122.21699000000001,37.84096],[-122.21709000000001,37.840990000000005],[-122.21719000000002,37.84098],[-122.21728000000002,37.84095000000001],[-122.21736000000001,37.840900000000005],[-122.21742,37.84082],[-122.21749000000001,37.840720000000005],[-122.21754000000001,37.84048000000001],[-122.21761000000001,37.84038],[-122.21777000000002,37.840300000000006],[-122.21785000000001,37.840180000000004],[-122.21790000000001,37.840090000000004],[-122.21794000000001,37.839980000000004],[-122.21795000000002,37.839850000000006],[-122.2181,37.8397],[-122.21897000000001,37.83981],[-122.21915000000001,37.83977],[-122.21920000000001,37.83973],[-122.21928000000001,37.83952],[-122.21929000000002,37.83943],[-122.21923000000001,37.839380000000006],[-122.21865000000001,37.839290000000005],[-122.21818,37.839290000000005],[-122.21748000000001,37.83939],[-122.21718000000001,37.83948],[-122.21689,37.839620000000004],[-122.21658000000001,37.839870000000005],[-122.21628000000001,37.840210000000006],[-122.21620000000001,37.840270000000004],[-122.21611000000001,37.84029],[-122.21594,37.84026],[-122.21516000000001,37.83999],[-122.21512000000001,37.83995],[-122.2151,37.839890000000004],[-122.21518,37.839690000000004],[-122.21532,37.83946],[-122.21564000000001,37.83903],[-122.21589000000002,37.838770000000004],[-122.21610000000001,37.8386],[-122.21671,37.83818],[-122.21713000000001,37.837990000000005],[-122.21728000000002,37.83784],[-122.21738,37.837480000000006],[-122.21747,37.83713],[-122.21755000000002,37.83675],[-122.21755000000002,37.83617],[-122.21754000000001,37.83597],[-122.21752000000001,37.83538],[-122.21743000000001,37.835190000000004],[-122.21705000000001,37.83467],[-122.21697,37.83285],[-122.21695000000001,37.832300000000004],[-122.21695000000001,37.83193],[-122.21699000000001,37.83135],[-122.21707,37.83077],[-122.21742,37.830220000000004],[-122.21746000000002,37.82826],[-122.21744000000001,37.8278],[-122.21739000000001,37.82748],[-122.21732000000002,37.827180000000006],[-122.21722000000001,37.82688],[-122.21696000000001,37.826600000000006],[-122.21657,37.826060000000005],[-122.21636000000001,37.825450000000004],[-122.21624000000001,37.82508],[-122.21614000000001,37.82481000000001],[-122.21605000000001,37.82453],[-122.21597000000001,37.82424],[-122.21596000000001,37.823750000000004],[-122.21596000000001,37.82358],[-122.21605000000001,37.82323],[-122.21617,37.82271],[-122.21636000000001,37.822300000000006],[-122.21688,37.821810000000006],[-122.21708000000001,37.820620000000005],[-122.21743000000001,37.820100000000004],[-122.21769,37.819300000000005],[-122.21799000000001,37.81889],[-122.21856000000001,37.81853],[-122.21894,37.818000000000005],[-122.21899,37.817730000000005],[-122.21894,37.817730000000005],[-122.21894,37.817660000000004],[-122.21896000000001,37.817620000000005],[-122.21902000000001,37.81758000000001],[-122.21931000000001,37.817510000000006],[-122.22082,37.817350000000005],[-122.2275,37.816430000000004],[-122.22854000000001,37.812270000000005],[-122.22888,37.81156],[-122.23025000000001,37.811370000000004],[-122.23059,37.810520000000004],[-122.23099,37.810340000000004],[-122.23132000000001,37.810080000000006],[-122.23261000000001,37.80989],[-122.23317000000002,37.80904],[-122.23394,37.8087],[-122.23788,37.80820000000001],[-122.23794000000001,37.80575],[-122.23797,37.805690000000006],[-122.23796000000002,37.805600000000005],[-122.23792000000002,37.8055],[-122.23776000000001,37.80541],[-122.23767000000001,37.80514],[-122.23752,37.804930000000006],[-122.23741000000001,37.804520000000004],[-122.23701000000001,37.80409],[-122.23672,37.801680000000005],[-122.23671000000002,37.79986],[-122.23673000000001,37.799290000000006],[-122.23677,37.79921],[-122.23683000000001,37.79914],[-122.23689000000002,37.7991],[-122.23717,37.799080000000004],[-122.23735,37.79903],[-122.23737000000001,37.79898],[-122.23737000000001,37.79894],[-122.23752,37.798790000000004]];

const coords = rawCoords.map((c) => new Cartesian3(c[0], c[1], 0));

const center = Cartesian3.fromDegrees(-122.26348000000002,37.82822);

const workingPositions = Cartesian3.fromDegreesArray(rawCoords.flatMap(c => c));

const polylines = new Cesium.PolylineCollection();
polylines.add({
    positions: Cartesian3.fromDegreesArray(rawCoords.flatMap(c => c)),
    width: 10,
});

const examplePolyline = {
    positions: workingPositions,
    show: true,
    width: 10,
    loop: false
}

const getCoords = async () => {
    /*const terrainData = Cesium.createWorldTerrain();
    await terrainData.readyPromise;
    const rect = new Cesium.Rectangle(-123, 32, 125,40);

    const coords = (await Promise.all(
        rawCoords
            .slice(0,10)
            .map(async c => {
                return Cesium.Cartographic.fromDegrees(c[0], c[1]);
            }))).flatMap(c => c);
    const heightAdjusted = await Cesium.sampleTerrain(terrainData, 11, coords);
    console.log(heightAdjusted);
    return heightAdjusted.map(c => Cartographic.toCartesian());*/
    var terrainProvider = Cesium.createWorldTerrain();
    var positions = rawCoords.map(c => Cesium.Cartographic.fromDegrees(c[0], c[1]));
    var heights = await Cesium.sampleTerrain(terrainProvider, 11, positions);

    var coords = [];
    for (var i=0; i<rawCoords.length; i++){
        coords.push([rawCoords[i][0], rawCoords[i][1], heights[i].height]);
    }
    console.log(coords);
    return coords.map(c => Cartesian3.fromDegrees(c[0], c[1], c[2]));
}

const App = () => {
    const [examplePolyline, setExamplePolyline] = useState(null)

    useEffect(() => {
        const banana = async () => {
            const coords = await getCoords();
            setExamplePolyline({
                positions: coords,
                show: true,
                width: 10,
                loop: false
            })
        }
        return banana
    }, [])

  return (
    <div className="App">
        {examplePolyline ?
      <Viewer full terrainProvider={Cesium.createWorldTerrain()}>
          <PolylineCollection modelMatrix={polylines.modelMatrix}>
              <Polyline positions={examplePolyline.positions} width={examplePolyline.width} loop={examplePolyline.loop}/>
          </PolylineCollection>
        <Entity
            description="test"
            name="tokyo"
            point={{ pixelSize: 10 }}
            position={Cartesian3.fromDegrees(139.767052, 35.681167, 0)}
        />
          <CameraFlyTo duration={1} destination={Cartesian3.fromDegrees(-122.26348000000002,37.82822, 1000)} />
      </Viewer>
        : null}
    </div>
  );
}

export default App;
